var __decorate=this&&this.__decorate||function(t,e,r,n){var a=arguments.length,i=a<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")i=Reflect.decorate(t,e,r,n);else for(var u=t.length-1;u>=0;u--)if(o=t[u])i=(a<3?o(i):a>3?o(e,r,i):o(e,r))||i;return a>3&&i&&Object.defineProperty(e,r,i),i};var __skipExtends={__metadata:true,__typeName:true,__componentFactory:true};var __extends=function(t,e){for(var r in e)if(e.hasOwnProperty(r)&&__skipExtends[r]!==true)t[r]=e[r];function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)};var __assign=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a))t[a]=e[a]}return t};var __rest=function(t,e){var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0)r[n]=t[n];if(t!=null&&typeof Object.getOwnPropertySymbols==="function")for(var a=0,n=Object.getOwnPropertySymbols(t);a<n.length;a++)if(e.indexOf(n[a])<0)r[n[a]]=t[n[a]];return r};var __spreadArrays=function(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),a=0,e=0;e<r;e++)for(var i=arguments[e],o=0,u=i.length;o<u;o++,a++)n[a]=i[o];return n};if(typeof Promise==="undefined"){if(typeof RSVP!=="undefined")Promise=RSVP;else if(typeof $!=="undefined"){Promise=$.Deferred;Promise.resolve=function(t){return $.Deferred().resolveWith(t)}}}var Serenity;(function(t){var e=function(){function t(){}return t}();t.ISlickFormatter=e})(Serenity||(Serenity={}));var globalObj=typeof global!=="undefined"?global:typeof window!=="undefined"?window:typeof self!=="undefined"?self:this;var Q;(function(t){t.types={};function e(t,e){var r=e.split(".");for(var n=0;n<r.length;n++){t=t[r[n]];if(t==null)return null}return t}t.getNested=e;t.getType=function(r,n){var a;if(n==null){a=t.types[r];if(a!=null||globalObj==null)return a;n=globalObj}a=e(n,r);if(typeof a!=="function")return null;return a};t.getTypeFullName=function(t){return t.__typeName||t.name||(t.toString().match(/^\s*function\s*([^\s(]+)/)||[])[1]||"Object"};t.getTypeName=function(e){var r=t.getTypeFullName(e);var n=r.indexOf("[");var a=r.lastIndexOf(".",n>=0?n:r.length);return a>0?r.substr(a+1):r};t.getInstanceType=function(t){if(t==null)throw new n("Cannot get type of null");try{return t.constructor}catch(e){return Object}};t.isAssignableFrom=function(t,e){return t===e||typeof t.isAssignableFrom==="function"&&t.isAssignableFrom(e)||e.prototype instanceof t};t.isInstanceOfType=function(e,r){if(e==null)return false;if(typeof r.isInstanceOfType==="function")return r.isInstanceOfType(e);return t.isAssignableFrom(r,t.getInstanceType(e))};t.safeCast=function(e,r){return t.isInstanceOfType(e,r)?e:null};t.cast=function(e,r){if(e==null)return e;else if(t.isInstanceOfType(e,r))return e;throw new o("Cannot cast object to type "+t.getTypeFullName(r))};t.getBaseType=function(t){if(t===Object||t.__interface){return null}else if(Object.getPrototypeOf){return Object.getPrototypeOf(t.prototype).constructor}else{var e=t.prototype;if(Object.prototype.hasOwnProperty.call(e,"constructor")){try{var r=e.constructor;delete e.constructor;return e.constructor}finally{e.constructor=r}}return e.constructor}};t.getAttributes=function(e,r,n){var a=[];if(n){var i=t.getBaseType(e);if(i){var o=t.getAttributes(i,r,true);for(var u=0;u<o.length;u++){var l=t.getInstanceType(o[u]);a.push(o[u])}}}if(e.__metadata&&e.__metadata.attr){for(var u=0;u<e.__metadata.attr.length;u++){var o=e.__metadata.attr[u];if(r==null||t.isInstanceOfType(o,r)){var l=t.getInstanceType(o);for(var s=a.length-1;s>=0;s--){if(t.isInstanceOfType(a[s],l))a.splice(s,1)}a.push(o)}}}return a};t.getMembers=function(e,r){var n=[];var a=t.getBaseType(e);if(a)n=t.getMembers(a,r&~1);if(e.__metadata&&e.__metadata.members){for(var i=0,o=e.__metadata.members;i<o.length;i++){var u=o[i];if(r&u.type)n.push(u)}}return n};t.getTypes=function(e){var r=[];if(!e){for(var n in t.types){if(t.types.hasOwnProperty(n))r.push(t.types[n])}}else{var a=function(t,e){for(var n in t){if(t.hasOwnProperty(n))a(t[n],n)}if(typeof t==="function"&&e.charAt(0).toUpperCase()===e.charAt(0)&&e.charAt(0).toLowerCase()!==e.charAt(0))r.push(t)};a(e,"")}return r};var r=function(t){__extends(e,t);function e(e){var r=t.call(this,e)||this;r.name="Exception";return r}return e}(Error);t.Exception=r;var n=function(t){__extends(e,t);function e(e){var r=t.call(this,e||"Object is null.")||this;r.name="NullReferenceException";return r}return e}(r);t.NullReferenceException=n;var a=function(t){__extends(e,t);function e(e,r){var n=t.call(this,(r||"Value cannot be null.")+"\nParameter name: "+e)||this;n.name="ArgumentNullException";return n}return e}(r);t.ArgumentNullException=a;var i=function(t){__extends(e,t);function e(e,r){var n=t.call(this,(r!==null&&r!==void 0?r:"Value is out of range.")+(e?"\nParameter name: "+e:""))||this;n.name="ArgumentNullException";return n}return e}(r);t.ArgumentOutOfRangeException=i;var o=function(t){__extends(e,t);function e(e){var r=t.call(this,e)||this;r.name="InvalidCastException";return r}return e}(r);t.InvalidCastException=o;t.clearKeys=function(t){for(var e in t){if(t.hasOwnProperty(e))delete t[e]}};t.delegateCombine=function(t,e){if(!t){if(!e._targets){return e}return e}if(!e){if(!t._targets){return t}return t}var r=t._targets?t._targets:[null,t];var n=e._targets?e._targets:[null,e];return s(r.concat(n))};var u;(function(t){t.toString=function(t,e){var r=t.prototype;if(e===0||!t.__metadata||!t.__metadata.enumFlags){for(var n in r){if(r[n]===e){return n}}return e==null?"":e.toString()}else{var a=[];for(var n in r){if(r[n]&e){a.push(n)}else a.push(e==null?"":e.toString())}return a.join(" | ")}};t.getValues=function(t){var e=[];var r=t.prototype;for(var n in r){if(r.hasOwnProperty(n))e.push(r[n])}return e}})(u=t.Enum||(t.Enum={}));function l(t,e,r){for(var n=0;n<t.length;n+=2){if(t[n]===e&&t[n+1]===r){return true}}return false}var s=function(t){var e=function(){if(t.length==2){return t[1].apply(t[0],arguments)}else{var e=t.slice();for(var r=0;r<e.length;r+=2){if(l(t,e[r],e[r+1])){e[r+1].apply(e[r],arguments)}}return null}};e._targets=t;return e};t.delegateRemove=function(t,e){if(!t||t===e){return null}if(!e){return t}var r=t._targets;var n=null;var a;if(e._targets){n=e._targets[0];a=e._targets[1]}else{a=e}for(var i=0;i<r.length;i+=2){if(r[i]===n&&r[i+1]===a){if(r.length==2){return null}var o=r.slice();o.splice(i,2);return s(o)}}return t};t.isEnum=function(t){return!!t.__enum};function f(t,e){for(var r=0;r<e.length-1;r+=2){(function(e,r){Object.defineProperty(t.prototype,e,{get:function(){return this.w(e,r)},enumerable:true,configurable:true})})(e[r],e[r+1])}}t.initFormType=f;function c(t,e,r,n){r=r||"get_"+e;n=n||"set_"+e;Object.defineProperty(t.prototype,e,{get:function(){return this[r]()},set:function(t){return this[n](t)},configurable:true,enumerable:true})}t.prop=c;function d(e,r,n){if(!e)return;for(var a=0,i=Object.keys(e);a<i.length;a++){var o=i[a];if(o.charAt(0)<"A"||o.charAt(0)>"Z")continue;if(o.indexOf("$")>=0)continue;if(o=="prototype")continue;if(!e.hasOwnProperty(o))continue;var u=e[o];if($.isArray(u)||e instanceof Date)continue;var l=typeof u;if(l=="string"||l=="number")continue;if($.isFunction(u)||u.__enum&&u.__register){if(u.hasOwnProperty("__typeName")&&!u.__register)continue;if(!u.__interfaces&&u.prototype.format&&o.substr(-9)=="Formatter"){u.__class=true;u.__interfaces=[Serenity.ISlickFormatter]}if(!u.__class){var s=t.getBaseType(u);if(s&&s.__class)u.__class=true}if(u.__class||u.__enum||u.__interface){u.__typeName=r+o;t.types[r+o]=u}delete u.__register}if(n>0)d(u,r+o+".",n-1)}}t.initializeTypes=d})(Q||(Q={}));var Q;(function(t){function e(t,e){return t!=null?t:e}t.coalesce=e;function r(t){return t!=null}t.isValue=r;function n(t,e){for(var r=0,n=t;r<n.length;r++){var a=n[r];if(e(a))return true}return false}t.any=n;function a(t,e){var r=0;for(var n=0,a=t;n<a.length;n++){var i=a[n];if(e(i))r++}return r}t.count=a;function i(t,e){for(var r=0,n=t;r<n.length;r++){var a=n[r];if(e(a))return a}throw new Error("first:No element satisfies the condition.!")}t.first=i;function o(t,e){for(var r=0;r<t.length;r++)if(e(t[r]))return r;return-1}t.indexOf=o;function u(t,e,r){if(t.insert)t.insert(e,r);else if(Object.prototype.toString.call(t)==="[object Array]")t.splice(e,0,r);else throw new Error("Object does not support insert!")}t.insert=u;function l(t){return Object.prototype.toString.call(t)==="[object Array]"}t.isArray=l;function s(t,e){var r;var n=false;for(var a=0,i=t;a<i.length;a++){var o=i[a];if(e(o)){if(n)throw new Error("single:sequence contains more than one element.");n=true;r=o}}if(!n)throw new Error("single:No element satisfies the condition.");return r}t.single=s;function f(t,e){var r={};for(var n=0,a=t;n<a.length;n++){var i=a[n];var o=e(i)||"";var u=r[o];if(!u){u=r[o]=[]}u.push(i)}return r}t.toGrouping=f;function c(e,r){var n={byKey:Object.create(null),inOrder:[]};for(var a=0;a<e.length;a++){var i=e[a];var o=t.coalesce(r(i),"");var u=n.byKey[o];if(u===undefined){u={order:n.inOrder.length,key:o,items:[i],start:a};n.byKey[o]=u;n.inOrder.push(u)}else{u.items.push(i)}}return n}t.groupBy=c;function d(t,e){for(var r=0,n=t;r<n.length;r++){var a=n[r];if(e(a))return a}}t.tryFirst=d;function p(t,e){if(e==null||!e.length)return true;if(e.length>t.length)return false;return t.substr(t.length-e.length)==e}t.endsWith=p;function h(t){return t==null||t.length===0}t.isEmptyOrNull=h;function g(t){return x(t)==null}t.isTrimmedEmpty=g;function v(t,e,r){if(r===void 0){r=" "}if(t["padStart"])return t["padStart"](e,r);t=t.toString();while(t.length<e)t=r+t;return t}t.padLeft=v;function m(t,e){if(e==null||!e.length)return true;if(e.length>t.length)return false;return t.substr(0,e.length)==e}t.startsWith=m;function y(e){return t.replaceAll(t.replaceAll(F(e),"\r\n"," "),"\n"," ").trim()}t.toSingleLine=y;t.today=function(){var t=new Date;return new Date(t.getFullYear(),t.getMonth(),t.getDate())};t.trimEnd=function(t){return t.replace(/\s*$/,"")};t.trimStart=function(t){return t.replace(/^\s*/,"")};function b(t){if(t==null)return"";return t.replace(new RegExp("^\\s+|\\s+$","g"),"")}t.trim=b;function F(t){if(t==null||t.length===0)return"";return b(t)}t.trimToEmpty=F;function x(t){t=b(t);if(t.length===0)return null;return t}t.trimToNull=x;function C(t,e,r){t=t||"";return t.split(e).join(r)}t.replaceAll=C;function w(t,e){var r=t.toString();while(r.length<e)r="0"+r;return r}t.zeroPad=w;function T(t,e,r){var n,a,i,o,u;if(null==e)e=100;function l(){var s=Date.now()-o;if(s<e&&s>=0){n=setTimeout(l,e-s)}else{n=null;if(!r){u=t.apply(i,a);i=a=null}}}var s=function(){i=this;a=arguments;o=Date.now();var s=r&&!n;if(!n)n=setTimeout(l,e);if(s){u=t.apply(i,a);i=a=null}return u};s.clear=function(){if(n){clearTimeout(n);n=null}};s.flush=function(){if(n){u=t.apply(i,a);i=a=null;clearTimeout(n);n=null}};return s}t.debounce=T;function S(t,e){for(var r in e)if(e.hasOwnProperty(r))t[r]=e[r];return t}t.extend=S;function O(e,r,n){if(r!=null||n!=null){return t.extend(t.extend(t.deepClone(e||{}),t.deepClone(r||{})),t.deepClone(n||{}))}if(!e)return e;var a;var i=Array.isArray(e)?[]:{};for(var o in e){a=e[o];i[o]=typeof a==="object"?O(a):a}return i}t.deepClone=O})(Q||(Q={}));var Q;(function(t){t.Invariant={decimalSeparator:".",groupSeparator:",",decimalDigits:2,negativeSign:"-",positiveSign:"+",percentSymbol:"%",currencySymbol:"$",dateSeparator:"/",dateOrder:"mdy",dateFormat:"MM/dd/yyyy",dateTimeFormat:"MM/dd/yyyy HH:mm:ss",amDesignator:"AM",pmDesignator:"PM",timeSeparator:":",firstDayOfWeek:0,dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],minimizedDayNames:["Su","Mo","Tu","We","Th","Fr","Sa"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December",""],shortMonthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec",""],stringCompare:function(t,e){return t<e?-1:t>e?1:0}};function e(t){var e={};for(var r=0;r<t.length;r++){e[t.charAt(r)]=r+1}return function(t,r){t=t||"";r=r||"";if(t==r)return 0;for(var n=0,a=Math.min(t.length,r.length);n<a;n++){var i=t.charAt(n),o=r.charAt(n);if(i===o)continue;var u=e[i],l=e[o];if(u!=null&&l!=null)return u<l?-1:1;var s=i.localeCompare(o);if(s==0)continue;return s}return t.localeCompare(r)}}t.compareStringFactory=e;t.Culture={decimalSeparator:".",groupSeparator:",",dateSeparator:"/",dateOrder:"dmy",dateFormat:"dd/MM/yyyy",dateTimeFormat:"dd/MM/yyyy HH:mm:ss",stringCompare:e("AaBbCcÇçFfGgĞğHhIıİiJjKkLlMmNnOoÖöPpRrSsŞşTtUuÜüVvYyZz")};(function(){var e;for(e in t.Invariant)if(t.Culture[e]===undefined&&t.Invariant.hasOwnProperty(e))t.Culture[e]=t.Invariant[e];if(typeof $!="undefined"&&(e=t.trimToNull($("script#ScriptCulture").html()))!=null){var r=$.parseJSON(e);if(r.DecimalSeparator!=null)t.Culture.decimalSeparator=r.DecimalSeparator;if(r.GroupSeparator!=null&&r.GroupSeparator!=t.Culture.decimalSeparator)t.Culture.groupSeparator=r.GroupSeparator;else if(t.Culture.groupSeparator==t.Culture.decimalSeparator)t.Culture.groupSeparator=t.Culture.decimalSeparator=="."?",":".";delete r.groupSeparator;delete r.decimal;for(e in r){if(t.Culture[e]===undefined&&r.hasOwnProperty(e))t.Culture[e.charAt(0).toLowerCase()+e.substr(1)]=r[e]}}})();function r(t){if(!t)return t;return t.replace(/i/g,"İ").replace(/ı/g,"I").toUpperCase()}t.turkishLocaleToUpper=r;t.turkishLocaleCompare=t.Culture.stringCompare;function n(e,r,n,a){var i=null;var o=e.indexOf(r);if(o>0){i=e.substr(o);e=e.substr(0,o)}var u=t.startsWith(e,a);if(u){e=e.substr(1)}var l=3;if(e.length<l){return(u?a:"")+(i?e+i:e)}var s=e.length;var f="";var c=false;while(!c){var d=l;var p=s-d;if(p<0){l+=p;d+=p;p=0;c=true}if(!d)break;var h=e.substr(p,d);if(f.length)f=h+n+f;else f=h;s-=d}if(u)f="-"+f;return i?f+i:f}var a=/\{\{|\}\}|\{[^\}\{]+\}/g;function i(e,r,n,i){return e.replace(a,function(e){if(e==="{{"||e==="}}")return e.charAt(0);var a=parseInt(e.substr(1),10);var o=n[a+i];if(o==null){return""}var u=t.getInstanceType(o);if(u==Number||u==Date){var s=null;var f=e.indexOf(":");if(f>0){s=e.substring(f+1,e.length-1)}return l(o,s,r)}else{return o.toString()}})}function o(e){var r=[];for(var n=1;n<arguments.length;n++){r[n-1]=arguments[n]}return i(e,t.Culture,arguments,1)}t.format=o;function u(t,e){var r=[];for(var n=2;n<arguments.length;n++){r[n-2]=arguments[n]}return i(t,e,arguments,2)}t.localeFormat=u;function l(e,r,n){if(typeof e==="number")return t.formatNumber(e,r,n);else if(Object.prototype.toString.call(e)==="[object Date]")return t.formatDate(e,r,n);else return e.format(r)}t.round=function(t,e,r){var n=Math.pow(10,e||0);t*=n;var a=t>0|-(t<0);if(t%1===.5*a){var i=Math.floor(t);return(i+(r?a>0:i%2*a))/n}return Math.round(t)/n};t.trunc=function(t){return t!=null?t>0?Math.floor(t):Math.ceil(t):null};function s(e,r,a,i){var o,l,s,f,c,p;if(e==null)return"";var h=typeof a!=="string"?a!==null&&a!==void 0?a:t.Culture:{decimalSeparator:a,groupSeparator:i!==null&&i!==void 0?i:a==","?".":","};if(isNaN(e)){return(o=h.nanSymbol)!==null&&o!==void 0?o:t.Culture.nanSymbol}if(r==null||r.length==0||r=="i"){return e.toString()}var g=(l=h.decimalSeparator)!==null&&l!==void 0?l:t.Culture.decimalSeparator;i=(s=i!==null&&i!==void 0?i:h.groupSeparator)!==null&&s!==void 0?s:t.Culture.groupSeparator;var v=(f=h.negativeSign)!==null&&f!==void 0?f:t.Culture.negativeSign;var m="";var y=-1;if(r.length>1){y=parseInt(r.substr(1),10)}var b=r.charAt(0);switch(b){case"d":case"D":m=parseInt(Math.abs(e)).toString();if(y!=-1)m=t.padLeft(m,y,"0");if(e<0)m=v+m;break;case"x":case"X":m=parseInt(Math.abs(e)).toString(16);if(b=="X")m=m.toUpperCase();if(y!=-1)m=t.padLeft(m,y,"0");break;case"e":case"E":if(y==-1)m=e.toExponential();else m=e.toExponential(y);if(b=="E")m=m.toUpperCase();break;case"f":case"F":case"n":case"N":if(y==-1){y=(c=h.decimalDigits)!==null&&c!==void 0?c:t.Culture.decimalDigits}m=e.toFixed(y).toString();if(y&&g!="."){var F=m.indexOf(".");m=m.substr(0,F)+g+m.substr(F+1)}if(b=="n"||b=="N"){m=n(m,g,i,v)}break;case"c":case"C":case"p":case"P":if(y==-1){y=(p=h.decimalDigits)!==null&&p!==void 0?p:t.Culture.decimalDigits}if(b==="p"||b=="P")e*=100;m=Math.abs(e).toFixed(y).toString();if(y&&g!="."){var F=m.indexOf(".");m=m.substr(0,F)+g+m.substr(F+1)}m=n(m,g,i,v);m=u("0",h,m);break;default:var x="";var C="";var w="";var T=false;var S=false;for(var O=0;O<r.length;O++){var k=r.charAt(O);if(k=="'"){S=!S;continue}else if(!S){if(k=="\\"){var k=r.charAt(O+1)||"";O++}else if(k=="#"||k==","||k=="."||k=="0"){T=true;C+=k;continue}}T?w+=k:x+=k}r=C;var D="";if(r.indexOf(".")>-1){var A=g;var M=r.substring(r.lastIndexOf(".")+1);e=d(e,M.length);var $=e%1;var _=new String($.toFixed(M.length));_=_.substring(_.lastIndexOf(".")+1);for(var E=0;E<M.length;E++){if(M.charAt(E)=="#"&&_.charAt(E)!="0"){A+=_.charAt(E);continue}else if(M.charAt(E)=="#"&&_.charAt(E)=="0"){var N=_.substring(E);if(N.match("[1-9]")){A+=_.charAt(E);continue}else break}else if(M.charAt(E)=="0")A+=_.charAt(E);else A+=M.charAt(E)}D+=A}else e=Math.round(e);var I=Math.floor(e);if(e<0)I=Math.ceil(e);var P="";if(r.indexOf(".")==-1)P=r;else P=r.substring(0,r.indexOf("."));var j="";if(!(I==0&&P.substr(P.length-1)=="#")){var L=new String(Math.abs(I));var Q=9999;if(P.lastIndexOf(",")!=-1)Q=P.length-P.lastIndexOf(",")-1;var H=0;for(var B=L.length-1;B>-1;B--){j=L.charAt(B)+j;H++;if(H==Q&&B!=0){j=i+j;H=0}}if(P.length>j.length){var R=P.indexOf("0");if(R!=-1){var U=P.length-R;var z=P.length-j.length-1;while(j.length<U){var W=P.charAt(z);if(W==",")W=i;j=W+j;z--}}}}if(!j&&P.indexOf("0",P.length-1)!==-1)j="0";D=j+D;if(e<0)D=v+D;if(D.lastIndexOf(g)==D.length-1){D=D.substring(0,D.length-1)}return x+D+w}return m}t.formatNumber=s;function f(e){e=t.trim(e.toString());var r=t.Culture.groupSeparator;if(e&&e.length&&e.indexOf(r)>0){e=e.replace(new RegExp("(\\b\\d{1,3})\\"+r+"(?=\\d{3}(\\D|$))","g"),"$1")}if(!/^[-\+]?\d+$/.test(e))return NaN;return parseInt(e,10)}t.parseInteger=f;function c(e){if(e==null)return null;e=t.trim(e.toString());if(e.length==0)return null;var r=t.Culture.groupSeparator;if(e&&e.length&&e.indexOf(r)>0){e=e.replace(new RegExp("(\\b\\d{1,3})\\"+r+"(?=\\d{3}(\\D|$))","g"),"$1")}if(!new RegExp("^\\s*([-\\+])?(\\d*)\\"+t.Culture.decimalSeparator+"?(\\d*)\\s*$").test(e))return NaN;return parseFloat(e.toString().replace(t.Culture.decimalSeparator,"."))}t.parseDecimal=c;function d(t,e){var r=Math.pow(10,e||0);var n=(Math.round(t*r)/r).toString();if(e>0){var a=n.indexOf(".");if(a==-1){n+=".";a=0}else{a=n.length-(a+1)}while(a<e){n+="0";a++}}return parseFloat(n)}function p(t){if(t==null)return null;if(typeof t=="number")return t;t=$.trim(t);if(t==null||!t.length)return null;if(t.length>=15||!/^-?\d+$/.test(t))return t;var e=parseInt(t,10);if(isNaN(e))return t;return e}t.toId=p;var h=/'.*?[^\\]'|dddd|ddd|dd|d|MMMM|MMM|MM|M|yyyy|yy|y|hh|h|HH|H|mm|m|ss|s|tt|t|fff|ff|f|zzz|zz|z|\//g;function g(e,r,n){var a,i,o,u,l,s,f,c,d,p,g,v,m;if(!e)return"";var y;if(typeof e=="string"){var b=t.parseDate(e,n==null?null:n.dateOrder);if(!b)return e;y=b}else y=e;if(r=="i")return y.toString();if(r=="id")return y.toDateString();if(r=="it")return y.toTimeString();if(n==null)n=t.Culture;if(r==null||r=="d")r=(a=n.dateFormat)!==null&&a!==void 0?a:t.Culture.dateFormat;else if(r.length==1){switch(r){case"g":r=((i=n.dateTimeFormat)!==null&&i!==void 0?i:t.Culture.dateTimeFormat).replace(":ss","");break;case"G":r=(o=n.dateTimeFormat)!==null&&o!==void 0?o:t.Culture.dateTimeFormat;break;case"s":r="yyyy-MM-ddTHH:mm:ss";break;case"d":r=(u=n.dateFormat)!==null&&u!==void 0?u:t.Culture.dateFormat;case"t":r=n.dateTimeFormat&&n.dateFormat?n.dateTimeFormat.replace(n.dateFormat+" ",""):"HH:mm";break;case"u":case"U":r=r=="u"?"yyyy-MM-ddTHH:mm:ss.fffZ":(l=n.dateTimeFormat)!==null&&l!==void 0?l:t.Culture.dateTimeFormat;y=new Date(y.getUTCFullYear(),y.getUTCMonth(),y.getUTCDate(),y.getUTCHours(),y.getUTCMinutes(),y.getUTCSeconds(),y.getUTCMilliseconds());break}}if(r.charAt(0)=="%"){r=r.substr(1)}var F=h;var x=[];F.lastIndex=0;while(true){var C=F.lastIndex;var w=F.exec(r);x.push(r.slice(C,w?w.index:r.length));if(!w){break}var T=w[0];var S=T;switch(T){case"/":S=(s=n.dateSeparator)!==null&&s!==void 0?s:t.Culture.dateSeparator;break;case"dddd":S=((f=n.dayNames)!==null&&f!==void 0?f:t.Culture.dayNames)[y.getDay()];break;case"ddd":S=((c=n.shortDayNames)!==null&&c!==void 0?c:t.Culture.shortDayNames)[y.getDay()];break;case"dd":S=t.padLeft(y.getDate().toString(),2,"0");break;case"d":S=y.getDate();break;case"MMMM":S=((d=n.monthNames)!==null&&d!==void 0?d:t.Culture.monthNames)[y.getMonth()];break;case"MMM":S=((p=n.shortMonthNames)!==null&&p!==void 0?p:t.Culture.shortMonthNames)[y.getMonth()];break;case"MM":S=t.padLeft(y.getMonth()+1,2,"0");break;case"M":S=y.getMonth()+1;break;case"yyyy":S=t.padLeft(y.getFullYear(),4,"0");break;case"yy":S=t.padLeft(y.getFullYear()%100,2,"0");break;case"y":S=y.getFullYear()%100;break;case"h":case"hh":S=y.getHours()%12;if(!S){S="12"}else if(T=="hh"){S=t.padLeft(S,2,"0")}break;case"HH":S=t.padLeft(y.getHours(),2,"0");break;case"H":S=y.getHours();break;case"mm":S=t.padLeft(y.getMinutes(),2,"0");break;case"m":S=y.getMinutes();break;case"ss":S=t.padLeft(y.getSeconds().toString(),2,"0");break;case"s":S=y.getSeconds();break;case"t":case"tt":S=y.getHours()<12?(g=n.amDesignator)!==null&&g!==void 0?g:t.Culture.amDesignator:(v=n.pmDesignator)!==null&&v!==void 0?v:t.Culture.pmDesignator;if(T=="t"){S=S.charAt(0)}break;case"fff":S=t.padLeft(y.getMilliseconds(),3,"0");break;case"ff":S=t.padLeft(y.getMilliseconds(),3).substr(0,2);break;case"f":S=t.padLeft(y.getMilliseconds(),3).charAt(0);break;case"z":case"Z":S=y.getTimezoneOffset()/60;S=(S>=0?"-":"+")+Math.floor(Math.abs(S));break;case"zz":case"zzz":S=y.getTimezoneOffset()/60;S=(S>=0?"-":"+")+Math.floor(t.padLeft(Math.abs(S),2,"0"));if(T=="zzz"){S+=((m=n.timeSeparator)!==null&&m!==void 0?m:t.Culture.timeSeparator)+Math.abs(t.padLeft(y.getTimezoneOffset()%60,2,"0"))}break;default:if(S.charAt(0)=="'"){S=S.substr(1,S.length-2).replace(/\\'/g,"'")}break}x.push(S)}return x.join("")}t.formatDate=g;function v(e){if(e===0)return"0";else if(!e)return"";var r=Math.floor(e/24/60);var n="";if(r>0){n+=r.toString()}var a=t.zeroPad(Math.floor(e%(24*60)/60),2)+":"+t.zeroPad(e%60,2);if(a!="00:00"){if(r>0)n+=".";n+=a}return n}t.formatDayHourAndMin=v;function m(t){if(t==null)return"";var e=function(t){return(t<10?"0":"")+t};var r=t.getUTCFullYear()+"-"+e(t.getUTCMonth()+1)+"-"+e(t.getUTCDate())+"T"+e(t.getUTCHours())+":"+e(t.getUTCMinutes());var n=Number(t.getUTCSeconds()+"."+(t.getUTCMilliseconds()<100?"0":"")+e(t.getUTCMilliseconds()));r+=":"+e(n)+"Z";return r}t.formatISODateTimeUTC=m;var y=/(\d{4,})(?:-(\d{1,2})(?:-(\d{1,2})(?:[T ](\d{1,2}):(\d{1,2})(?::(\d{1,2})(?:\.(\d+))?)?(?:(Z)|([+-])(\d{1,2})(?::(\d{1,2}))?)?)?)?)?/;function b(t){if(!t||!t.length)return null;t=t+"";if(typeof t!="string"||t.length===0)return null;var e=t.match(y);if(typeof e=="undefined"||e===null)return null;return new Date(t)}t.parseISODateTime=b;function F(e){var r=t.trim(e);if(r.length<4||r.length>5)return NaN;var n,a;if(r.charAt(1)==":"){n=f(r.substr(0,1));a=f(r.substr(2,2))}else{if(r.charAt(2)!=":")return NaN;n=f(r.substr(0,2));a=f(r.substr(3,2))}if(isNaN(n)||isNaN(a)||n<0||n>23||a<0||a>59)return NaN;return n*60+a}t.parseHourAndMin=F;function x(e){var r;var n=t.trim(e);if(!n)return NaN;var a=n.split(".");if(a.length==0||a.length>2)return NaN;if(a.length==1){r=f(a[0]);if(!isNaN(r))return r*24*60;return F(a[0])}else{r=f(a[0]);var i=F(a[1]);if(isNaN(r)||isNaN(i))return NaN;return r*24*60+i}}t.parseDayHourAndMin=x;function C(e,r){if(!e||!e.length)return null;if(e.length>=10&&e.charAt(4)==="-"&&e.charAt(7)==="-"&&(e.length===10||e.length>10&&e.charAt(10)==="T")){var n=t.parseISODateTime(e);if(n==null)return false;return n}e=t.trim(e);if(e.indexOf(" ")>0&&e.indexOf(":")>e.indexOf(" ")+1){var a=t.parseDate(e.substr(0,e.indexOf(" ")));if(!a)return false;return t.parseISODateTime(t.formatDate(a,"yyyy-MM-dd")+"T"+t.trim(e.substr(e.indexOf(" "+1))))}var i;var o;var u,l,s;o=w(e);if(!o)return false;if(o.length==3){r=r||t.Culture.dateOrder;switch(r){case"dmy":u=parseInt(o[0],10);l=parseInt(o[1],10)-1;s=parseInt(o[2],10);break;case"ymd":u=parseInt(o[2],10);l=parseInt(o[1],10)-1;s=parseInt(o[0],10);break;case"mdy":default:u=parseInt(o[1],10);l=parseInt(o[0],10)-1;s=parseInt(o[2],10);break}if(isNaN(u)||isNaN(l)||isNaN(s)||u<1||u>31||l<0||l>11||s>9999||s<0)return false;if(s<100){var f=(new Date).getFullYear();var c=f%100+10;s+=f-f%100+(s<=c?0:-100)}try{i=new Date(s,l,u);if(isNaN(i.getFullYear()))return false}catch(d){return false}}else if(o.length==1){try{i=new Date(o[0]);if(isNaN(i.getFullYear()))return false}catch(d){return false}}return i}t.parseDate=C;function w(e){e=t.trim(e);if(!e.length)return;if(e.indexOf("/")>=0)return e.split("/");else if(e.indexOf(".")>=0)return e.split(".");else if(e.indexOf("-")>=0)return e.split("-");else if(e.indexOf("\\")>=0)return e.split("\\");else return[e]}t.splitDateString=w})(Q||(Q={}));var Q;(function(t){function e(t){var e=u.$table[t];if(e==null){e=t||""}return e}t.text=e;function r(t){return function(r){return e("Db."+t+"."+r)}}t.dbText=r;function n(e){return function(r,n){if(r!=null&&!t.startsWith(r,"`")){var a=t.tryGetText(r);if(a!=null){return a}}if(r!=null&&t.startsWith(r,"`")){r=r.substr(1)}if(!t.isEmptyOrNull(e)){var i=typeof n=="function"?n(e):e+n;var o=t.tryGetText(i);if(o!=null){return o}}return r}}t.prefixedText=n;function a(t){return u.$table[t]}t.tryGetText=a;function i(t){return function(r){return e("Db."+t+"."+r)}}t.dbTryText=i;function o(e,r,n){if(typeof window!="undefined"&&window["Proxy"]){return new window["Proxy"](e,{get:function(a,i){var u=n[i];if(u==null)return;if(typeof u=="number")return t.text(r+i);else{var l=e[i];if(l!=null)return l;e[i]=l=o({},r+i+".",u);return l}},ownKeys:function(t){return Object.keys(n)}})}else{for(var a=0,i=Object.keys(n);a<i.length;a++){var u=i[a];if(typeof n[u]=="number")Object.defineProperty(e,u,{get:function(){return t.text(r+u)}});else e[u]=o({},r+u+".",n[u])}return e}}t.proxyTexts=o;var u=function(){function t(t){this.key=t}t.add=function(e,r){if(!e){return}r=r||"";for(var n=0,a=Object.keys(e);n<a.length;n++){var i=a[n];var o=r+i;var u=e[i];if(typeof u==="object"){t.add(u,o+".")}else{t.$table[o]=u}}};t.prototype.get=function(){var e=t.$table[this.key];if(e==null){e=this.key||""}return e};t.prototype.toString=function(){var e=t.$table[this.key];if(e==null){e=this.key||""}return e};t.$table={};t.empty=new t("");t.initializeTextClass=function(e,r){var n=Object.keys(e).slice();for(var a=0;a<n.length;a++){var i=n[a];var o=e[i];if(o instanceof t){var u=o;var l=r+i;t.$table[l]=u.key;e[i]=new t(l)}}};t.getDefault=function(e,r){var n=t.$table[e];if(n==null){n=r;if(n==null){n=e||""}}return n};return t}();t.LT=u})(Q||(Q={}));var Q;(function(t){var e=function(){function e(t,e){this.items=[];this.itemById={};t=t||{};this.textFormatter=t.textFormatter;this.idField=t.idField;this.parentIdField=t.parentIdField;this.textField=t.textField;this.textFormatter=t.textFormatter;if(e!=null)this.update(e)}e.prototype.update=function(e){this.items=[];this.itemById={};if(e){for(var r=0,n=e;r<n.length;r++){var a=n[r];this.items.push(a)}}var i=this.idField;if(!t.isEmptyOrNull(i)){for(var o=0,u=this.items;o<u.length;o++){var l=u[o];var s=l[i];if(s!=null){this.itemById[s]=l}}}};e.prototype.get_idField=function(){return this.idField};e.prototype.get_parentIdField=function(){return this.parentIdField};e.prototype.get_textField=function(){return this.textField};e.prototype.get_textFormatter=function(){return this.textFormatter};e.prototype.get_itemById=function(){return this.itemById};e.prototype.get_items=function(){return this.items};return e}();t.Lookup=e})(Q||(Q={}));var Q;(function(t){var e=0;function r(t){if(e>0){e++;return}if($.blockUI){$.blockUI&&$.blockUI(t)}else{$('<div class="blockUI blockOverlay" style="z-index: 2000; border: none; margin: 0px; padding: 0px; width: 100%; height: 100%; top: 0px; left: 0px; opacity: 0; cursor: wait; position: fixed;"></div>').appendTo(document.body)}e++}function n(e){e=t.extend({baseZ:2e3,message:"",overlayCSS:{opacity:"0.0",zIndex:2e3,cursor:"wait"},fadeOut:0},e);if(e.useTimeout){window.setTimeout(function(){r(e)},0)}else{r(e)}}t.blockUI=n;function a(){if(e>1){e--;return}e--;if($.unblockUI)$.unblockUI({fadeOut:0});else $(document.body).children(".blockUI.blockOverlay").remove()}t.blockUndo=a})(Q||(Q={}));var Q;(function(t){function e(t,e,r){$("<option/>").val(e).text(r).appendTo(t)}t.addOption=e;function r(r){e(r,"",t.text("Controls.SelectEditor.EmptyItemText"))}t.addEmptyOption=r;function n(t){t.html("")}t.clearOptions=n;function a(e,r){var n=e.attr("id");if(t.isEmptyOrNull(n)){return $("#"+r)}var a=$("#"+n+r);if(a.length>0){return a}a=$("#"+n+"_"+r);if(a.length>0){return a}while(true){var i=n.lastIndexOf("_");if(i<=0){return $("#"+r)}n=n.substr(0,i);a=$("#"+n+"_"+r);if(a.length>0){return a}}}t.findElementWithRelativeId=a;function i(t){switch(t){case"&":return"&amp;";case">":return"&gt;";case"<":return"&lt;";case"'":return"&apos;";case'"':return"&quot;"}return t}var o=/[><&'"]/g;function u(t){var e=t==null?"":t.toString();if(o.test(e)){return e.replace(o,i)}return e}t.attrEncode=u;function l(t){switch(t){case"&":return"&amp;";case">":return"&gt;";case"<":return"&lt;"}return t}function s(t){var e=t==null?"":t.toString();if(new RegExp("[><&]","g").test(e)){return e.replace(new RegExp("[><&]","g"),l)}return e}t.htmlEncode=s;function f(e,r){if(!e||e.indexOf("{{")<0){return e}if(!$.templates||!$.views){throw new t.Exception("Please make sure that jsrender.js is included in the page!")}r=r||{};var n=$.templates(e);$.views.converters({text:t.text},n);return n.render(r)}t.jsRender=f;function c(t){if(typeof console!=="undefined"&&console.log)console.log(t)}t.log=c;function d(){return $("<div/>").appendTo(document.body)}t.newBodyDiv=d;function p(t){return $("<i/>").append(t.eq(0).clone()).html()}t.outerHtml=p})(Q||(Q={}));var Q;(function(t){if(typeof $!=="undefined"&&$.fn&&$.fn.button&&$.ui&&$.ui.button&&$.fn.button.noConflict){$.fn.btn=$.fn.button.noConflict()}function e(e){if(!e)return null;if(t.startsWith(e,"fa-"))return"fa "+e;if(t.startsWith(e,"glyphicon-"))return"glyphicon "+e;return e}function r(e,r,n){var a=t.extend({modal:true,width:"40%",maxWidth:450,minWidth:180,resizable:false,open:function(){if(e.onOpen)e.onOpen.call(this)},close:function(){$(this).dialog("destroy");if(e.onClose)e.onClose.call(this,e.result)}},e);a.dialogClass="s-MessageDialog"+(n?" "+n:"");if(e.buttons){a.buttons=e.buttons.map(function(t){var r=s(t);r.click=function(r){e.result=t.result;$(this).dialog("close");t.click&&t.click.call(this,r)};return r})}return $("<div>"+r+"</div>").dialog(a)}var n;function a(){if(n!=null)return n;return n=!!($.fn.modal&&$.fn.modal.Constructor&&$.fn.modal.Constructor.VERSION&&($.fn.modal.Constructor.VERSION+"").charAt(0)=="3")}t.isBS3=a;var i={AlertTitle:"Alert",InformationTitle:"Information",WarningTitle:"Warning",ConfirmationTitle:"Confirm",OkButton:"OK",YesButton:"Yes",NoButton:"No",CancelButton:"Cancel",CloseButton:"Close"};function o(e){var r;return(r=t.tryGetText("Dialogs."+e))!==null&&r!==void 0?r:i[e]}function u(t,e,r){var n='<button type="button" class="close" data-dismiss="modal" aria-label="'+o("CloseButton")+'">'+'<span aria-hidden="true">&times;</span></button>';return'<div class="modal '+r+'" tabindex="-1" role="dialog">\n    <div class="modal-dialog" role="document">\n        <div class="modal-content">\n            <div class="modal-header">\n                '+(a()?n:"")+'<h5 class="modal-title">'+t+"</h5>"+(a()?"":n)+'\n            </div>\n            <div class="modal-body">'+e+'</div>\n            <div class="modal-footer"></div>\n        </div>\n    </div>\n</div>'}t.bsModalMarkup=u;function l(r){var n=r.htmlEncode==null||r.htmlEncode?t.htmlEncode(r.text):r.text;
var a=e(r.icon);if(a!=null)n='<i class="'+a+"><i>"+(n?" "+n:"");return'<button class="btn '+(r.cssClass?r.cssClass:"")+'"'+(r.hint?' title="'+t.attrEncode(r.hint)+'"':"")+">"+n+"</button>"}t.dialogButtonToBS=l;function s(r){var n=r.htmlEncode==null||r.htmlEncode?t.htmlEncode(r.text):r.text;var a=e(r.icon);if(a!=null)n='<i class="'+a+"><i> ";return{text:n,attr:!r.cssClass?undefined:{"class":r.cssClass},click:r.click}}t.dialogButtonToUI=s;function f(t,e,r){var n=u(t.title,e,"s-MessageModal"+(r?" "+r:""));var a=$(n).eq(0).appendTo(document.body);if(t.onOpen)a.one("shown.bs.modal",t.onOpen);if(t.onClose)a.one("hidden.bs.modal",function(e){return t.onClose(t.result)});var i=a.find(".modal-footer");function o(e){var r=this;return $(l(e)).appendTo(i).click(function(n){t.result=e.result;a.modal("hide");e.click&&e.click.call(r,n)})}if(t.buttons)for(var s=0,f=t.buttons;s<f.length;s++){var c=f[s];o(c)}a.modal({backdrop:false,show:true})}var c;function d(){if(c==null){c=typeof $==="undefined"||(!$.ui||!$.ui.dialog)&&(!$.fn||!$.fn.modal)}return c}function p(e){return!!(!$.ui||!$.ui.dialog||t.Config.bootstrapMessages||e&&e.bootstrap)}function h(e,r){var n=r==null||r.htmlEncode==null||r.htmlEncode;if(n)e=t.htmlEncode(e);var a=r==null||r.preWrap==null&&n||r.preWrap;return'<div class="message"'+(a?' style="white-space: pre-wrap">':">")+e+"</div>"}function g(e,n){var a,i;if(d()){window.alert(e);return}var u=p(n);n=t.extend({htmlEncode:true,okButton:o("OkButton"),title:o("AlertTitle")},n);if(n.buttons==null){n.buttons=[];if(n.okButton==null||n.okButton){n.buttons.push({text:typeof n.okButton=="boolean"?o("OkButton"):n.okButton,cssClass:u?"btn-default":undefined,result:"ok"})}}e=h(e,n);if(u)f(n,e,(a=n.modalClass)!==null&&a!==void 0?a:"s-AlertModal");else r(n,e,(i=n.dialogClass)!==null&&i!==void 0?i:"s-AlertDialog")}t.alert=g;function v(e,n,a){var i,u;if(d()){if(window.confirm(e))n&&n();return}var l=p(a);a=t.extend({htmlEncode:true,yesButton:o("YesButton"),noButton:o("NoButton"),title:o("ConfirmationTitle")},a);if(a.buttons==null){a.buttons=[];if(a.yesButton==null||a.yesButton){a.buttons.push({text:typeof a.yesButton=="boolean"?o("YesButton"):a.yesButton,cssClass:l?"btn-primary":undefined,result:"yes",click:n})}if(a.noButton==null||a.noButton){a.buttons.push({text:typeof a.noButton=="boolean"?o("NoButton"):a.noButton,cssClass:l?"btn-default":undefined,result:"no",click:a.onNo})}if(a.cancelButton){a.buttons.push({text:typeof a.cancelButton=="boolean"?o("CancelButton"):a.cancelButton,cssClass:l?"btn-default":undefined,result:"cancel",click:a.onCancel})}}e=h(e,a);if(l)f(a,e,(i=a.modalClass)!==null&&i!==void 0?i:"s-ConfirmModal");else r(a,e,(u=a.dialogClass)!==null&&u!==void 0?u:"s-ConfirmDialog")}t.confirm=v;function m(e){if(d()){window.alert(e.html);return}if(p(e)){f({title:o("AlertTitle"),modalClass:"modal-lg",onOpen:function(){r=$(this).find("iframe").css({border:"none",width:"100%",height:"100%"})[0].contentDocument;r.open();r.write(a.html);r.close()}},'<div style="overflow: hidden"><iframe></iframe></div>',"s-IFrameModal");return}var r;var n=$('<div style="overflow: hidden"><iframe></iframe></div>');var a=t.extend({autoOpen:true,modal:true,width:"60%",height:"400",title:o("AlertTitle"),open:function(){r=n.find("iframe").css({border:"none",width:"100%",height:"100%"})[0].contentDocument;r.open();r.write(a.html);r.close()},close:function(){r.open();r.write("");r.close();n.dialog("destroy").html("")}},e);n.dialog(a)}t.iframeDialog=m;function y(e,r,n){if(d()){window.alert(e);r&&r();return}v(e,r,t.extend({title:o("InformationTitle"),dialogClass:"s-InformationDialog",modalClass:"s-InformationModal",yesButton:o("OkButton"),noButton:false},n))}t.information=y;function b(e,r){g(e,t.extend({title:o("WarningTitle"),dialogClass:"s-WarningDialog",modalClass:"s-WarningModal"},r))}t.warning=b})(Q||(Q={}));var Q;(function(t){t.defaultNotifyOptions={timeOut:3e3,showDuration:250,hideDuration:500,extendedTimeOut:500,positionClass:"toast-top-full-width"};function e(e){e=t.extend(t.extend({},t.defaultNotifyOptions),e);o(true);return e}function r(t,r,n){toastr.warning(t,r,e(n))}t.notifyWarning=r;function n(t,r,n){toastr.success(t,r,e(n))}t.notifySuccess=n;function a(t,r,n){toastr.info(t,r,e(n))}t.notifyInfo=a;function i(t,r,n){toastr.error(t,r,e(n))}t.notifyError=i;function o(t){if(typeof toastr==="undefined"){return}var e=$(window.document.body).children(".ui-dialog:visible, .modal.in, .modal.show").last();var r=toastr.getContainer(null,t);if(r.length===0){return}if(e.length>0){var n=e.position();r.addClass("positioned-toast toast-top-full-width");r.css({position:"absolute",top:n.top+28+"px",left:n.left+6+"px",width:e.width()-12+"px"})}else{r.addClass("toast-top-full-width");if(r.hasClass("positioned-toast")){r.removeClass("positioned-toast");r.css({position:"",top:"",left:"",width:""})}}}t.positionToastContainer=o})(Q||(Q={}));var Q;(function(t){var e;(function(e){function r(e){var r;if(e==null){r="??ERROR??"}else{r=e.Message;if(r==null){r=e.Code}}t.alert(r)}e.showServiceError=r;function n(e,r,n,a,i){try{var o=(window.location.host||"").toLowerCase();if(o.indexOf("localhost")<0&&o.indexOf("127.0.0.1")<0)return;if(!window["toastr"])return;var u=JSON.stringify(i||{});e="<p></p><p>Message: "+t.htmlEncode(e)+"</p><p>File: "+t.htmlEncode(r)+", Line: "+n+", Column: "+a+(u!="{}"?"</p><p>Error: ":"")+"</p>";window.setTimeout(function(){try{t.notifyError(e,"SCRIPT ERROR! See browser console (F12) for details.",{escapeHtml:false,timeOut:15e3})}catch(r){}})}catch(l){}}e.runtimeErrorHandler=n})(e=t.ErrorHandling||(t.ErrorHandling={}))})(Q||(Q={}));var Q;(function(t){var e;(function(t){t.applicationPath="/";if(typeof document!=="undefined"){var e=document.querySelector("link#ApplicationPath");if(e!=null){t.applicationPath=e.href}}t.emailAllowOnlyAscii=true;t.responsiveDialogs=false;t.bootstrapMessages=false;t.rootNamespaces=["Serenity"];t.notLoggedInHandler=null})(e=t.Config||(t.Config={}))})(Q||(Q={}));var Q;(function(t){function e(t){if($.cookie)return $.cookie(t);t+="=";for(var e=document.cookie.split(/;\s*/),r=e.length-1;r>=0;r--)if(!e[r].indexOf(t))return e[r].replace(t,"")}t.getCookie=e;typeof $!="undefined"&&$.ajaxSetup&&$.ajaxSetup({beforeSend:function(e){var r=t.getCookie("CSRF-TOKEN");if(r)e.setRequestHeader("X-CSRF-TOKEN",r)}});function r(e){var r=function(r){if(t.Config.notLoggedInHandler!=null&&r&&r.Error&&r.Error.Code=="NotLoggedIn"&&t.Config.notLoggedInHandler(e,r)){return}if(e.onError!=null){e.onError(r);return}t.ErrorHandling.showServiceError(r.Error)};var n=e.service;if(n&&n.length&&n.charAt(0)!="~"&&n.charAt(0)!="/"&&n.indexOf("://")<0)n=l("~/services/")+n;e=t.extend({dataType:"json",contentType:"application/json",type:"POST",cache:false,blockUI:true,url:n,data:$.toJSON(e.request),success:function(r,n,a){try{if(!r.Error&&e.onSuccess){e.onSuccess(r)}}finally{if(e.blockUI){t.blockUndo()}e.onCleanup&&e.onCleanup()}},error:function(n,a,i){try{if(n.status===403){var o=null;try{o=n.getResponseHeader("Location")}catch(u){o=null}if(o){window.top.location.href=o;return}}if((n.getResponseHeader("content-type")||"").toLowerCase().indexOf("application/json")>=0){var l=$.parseJSON(n.responseText);if(l&&l.Error){r(l);return}}var s=n.responseText;if(!s){if(!n.status){if(n.statusText!="abort")t.alert("An unknown AJAX connection error occurred! Check browser console for details.")}else if(n.status==500)t.alert("HTTP 500: Connection refused! Check browser console for details.");else t.alert("HTTP "+n.status+" error! Check browser console for details.")}else t.iframeDialog({html:s})}finally{if(e.blockUI){t.blockUndo()}e.onCleanup&&e.onCleanup()}}},e);if(e.blockUI){t.blockUI(null)}return $.ajax(e)}t.serviceCall=r;function n(e,n,a,i){return r(t.extend({service:e,request:n,onSuccess:a},i))}t.serviceRequest=n;function a(t,e,r){if(t.EqualityFilter==null){t.EqualityFilter={}}t.EqualityFilter[e]=r}t.setEquality=a;function i(t){var e;if(t===undefined)e=location.search.substring(1,location.search.length);else e=t||"";var r={};var n=e.split("&");for(var a=0;a<n.length;a++){var i=n[a].split("=");var o=decodeURIComponent(i[0]);r[o]=i.length>=2?decodeURIComponent(i[1]):o}return r}t.parseQueryString=i;function o(e){var r=$("<form/>").attr("method","POST").attr("action",e.url?l(e.url):l("~/services/"+e.service)).appendTo(document.body);if(e.target)r.attr("target",e.target);var n=$("<div/>").appendTo(r);$("<input/>").attr("type","hidden").attr("name","request").val($["toJSON"](e.request)).appendTo(n);var a=t.getCookie("CSRF-TOKEN");if(a){$("<input/>").attr("type","hidden").attr("name","__RequestVerificationToken").appendTo(n).val(a)}$("<input/>").attr("type","submit").appendTo(n);r.submit();window.setTimeout(function(){r.remove()},0)}t.postToService=o;function u(e){var r=$("<form/>").attr("method","POST").attr("action",l(e.url)).appendTo(document.body);if(e.target)r.attr("target",e.target);var n=$("<div/>").appendTo(r);if(e.params!=null){for(var a in e.params){$("<input/>").attr("type","hidden").attr("name",a).val(e.params[a]).appendTo(n)}}var i=t.getCookie("CSRF-TOKEN");if(i){$("<input/>").attr("type","hidden").attr("name","__RequestVerificationToken").appendTo(n).val(i)}$("<input/>").attr("type","submit").appendTo(n);r.submit();window.setTimeout(function(){r.remove()},0)}t.postToUrl=u;function l(e){if(e&&e.substr(0,2)==="~/"){return t.Config.applicationPath+e.substr(2)}return e}t.resolveUrl=l})(Q||(Q={}));var Q;(function(t){var e;(function(e){var r={};var n={};function a(t,e,r){$(document.body).bind("scriptdatachange."+e,function(e,n){if(n==t){r()}})}e.bindToChange=a;function i(t){$(document.body).triggerHandler("scriptdatachange",[t])}e.triggerChange=i;function o(t){$(document.body).unbind("scriptdatachange."+t)}e.unbindFromChange=o;function u(e,n){return{async:n,cache:true,type:"GET",url:t.resolveUrl("~/DynJS.axd/")+e+".js?"+r[e],data:null,dataType:"text",converters:{"text script":function(t){return t}},success:function(t,e,r){$.globalEval(t)},error:function(r,n,a){var i=t.startsWith(e,"Lookup.");if(r.status==403&&i){t.notifyError('<p>Access denied while trying to load the lookup: "<b>'+e.substr(7)+'</b>". Please check if current user has required permissions for this lookup.</p> '+"<p><em>Lookups use the ReadPermission of their row by default. You may override that for the lookup "+'like [LookupScript("Some.Lookup", Permission = "?")] to grant all '+'authenticated users to read it (or use "*" for public).</em></p>'+"<p><em>Note that this might be a security risk if the lookup contains sensitive data, "+'so it could be better to set a separate permission for lookups, like "MyModule:Lookups".</em></p>',null,{timeOut:1e4,escapeHtml:false});return}t.notifyError("An error occurred while trying to load "+(i?' the lookup: "'+e.substr(7):' dynamic script: "'+e)+'"!. Please check the error message displayed in the dialog below for more info.');var o=r.responseText;if(!o){if(!r.status)t.alert("An unknown connection error occurred! Check browser console for details.");else if(r.status==500)t.alert("HTTP 500: Connection refused! Check browser console for details.");else t.alert("HTTP "+r.status+" error! Check browser console for details.")}else t.iframeDialog({html:o})}}}function l(e){return Promise.resolve().then(function(){t.blockUI(null);return Promise.resolve($.ajax(u(e,true)).always(function(){t.blockUndo()}))},null)}function s(e){if(r[e]==null){throw new Error(t.format("Script data {0} is not found in registered script list!",e))}$.ajax(u(e,false))}function f(e){return Promise.resolve().then(function(){if(r[e]==null){throw new Error(t.format("Script data {0} is not found in registered script list!",e))}return l(e)},null)}function c(e){var r=n[e];if(r==null){s(e)}r=n[e];if(r==null)throw new Error(t.format("Can't load script data: {0}!",e));return r}e.ensure=c;function d(e){return Promise.resolve().then(function(){var r=n[e];if(r!=null){return Promise.resolve(r)}return f(e).then(function(){r=n[e];if(r==null){throw new Error(t.format("Can't load script data: {0}!",e))}return r},null)},null)}e.ensureAsync=d;function p(e){if(r[e]==null){throw new Error(t.format("Script data {0} is not found in registered script list!",e))}r[e]=(new Date).getTime().toString();s(e);var a=n[e];return a}e.reload=p;function h(e){return Promise.resolve().then(function(){if(r[e]==null){throw new Error(t.format("Script data {0} is not found in registered script list!",e))}r[e]=(new Date).getTime().toString();return f(e).then(function(){return n[e]},null)},null)}e.reloadAsync=h;function g(t){return n[t]!=null||r[t]!=null}e.canLoad=g;function v(t){r={};var e=(new Date).getTime();for(var n in t){r[n]=t[n]||e}}e.setRegisteredScripts=v;function m(t,e){n[t]=e;i(t)}e.set=m})(e=t.ScriptData||(t.ScriptData={}));function r(t){return e.ensure("RemoteData."+t)}t.getRemoteData=r;function n(t){return e.ensureAsync("RemoteData."+t)}t.getRemoteDataAsync=n;function a(r){var n="Lookup."+r;if(!e.canLoad(n)){var a='No lookup with key "'+r+'" is registered. Please make sure you have a'+' [LookupScript("'+r+'")] attribute in server side code on top of a row / custom lookup and '+" its key is exactly the same.";t.notifyError(a);throw new Error(a)}return e.ensure("Lookup."+r)}t.getLookup=a;function i(t){return e.ensureAsync("Lookup."+t)}t.getLookupAsync=i;function o(t){e.reload("Lookup."+t)}t.reloadLookup=o;function u(t){return e.reloadAsync("Lookup."+t)}t.reloadLookupAsync=u;function l(t){return e.ensure("Columns."+t)}t.getColumns=l;function s(t){return e.ensureAsync("Columns."+t)}t.getColumnsAsync=s;function f(t){return e.ensure("Form."+t)}t.getForm=f;function c(t){return e.ensureAsync("Form."+t)}t.getFormAsync=c;function d(t){return e.ensure("Template."+t)}t.getTemplate=d;function p(t){return e.ensureAsync("Template."+t)}t.getTemplateAsync=p;function h(t){return e.canLoad(t)}t.canLoadScriptData=h})(Q||(Q={}));var Q;(function(t){if(typeof $!=="undefined"&&$.validator&&$.validator.methods&&$.validator.addMethod){$.validator.addMethod("customValidate",function(t,e){var r=this.optional(e);if(e==null||!!r){return r}var n=$._data(e,"events");if(!n){return true}var a=n.customValidate;if(a==null||a.length===0){return true}var i=$(e);for(var o=0;!!(o<a.length);o++){if($.isFunction(a[o].handler)){var u=a[o].handler(i);if(u!=null){i.data("customValidationMessage",u);return false}}}return true},function(t,e){return $(e).data("customValidationMessage")});$.validator.addMethod("dateQ",function(e,r){var n=this.optional(r);if(n)return n;var a=t.parseDate(e);if(!a)return false;var i=new Date(a);i.setHours(0,0,0,0);return i.getTime()===a.getTime()});$.validator.addMethod("dateTimeQ",function(e,r){var n=this.optional(r);if(n)return n;var a=t.parseDate(e);return!!a});$.validator.addMethod("hourAndMin",function(e,r){return this.optional(r)||!isNaN(t.parseHourAndMin(e))});$.validator.addMethod("dayHourAndMin",function(e,r){return this.optional(r)||!isNaN(t.parseDayHourAndMin(e))});$.validator.addMethod("decimalQ",function(e,r){return this.optional(r)||!isNaN(t.parseDecimal(e))});$.validator.addMethod("integerQ",function(e,r){return this.optional(r)||!isNaN(t.parseInteger(e))});var e=$.validator.methods["email"];var r=null;$.validator.addMethod("email",function(n,a){if(t.Config.emailAllowOnlyAscii)return e.call(this,n,a);if(r==null)r=new RegExp("^((([a-z]|\\d|[!#\\$%&'\\*\\+\\-\\/=\\?\\^_`{\\|}~]|"+"[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])+(\\.([a-z]|\\d|"+"[!#\\$%&'\\*\\+\\-\\/=\\?\\^_`{\\|}~]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])+)*)|"+"((\\x22)((((\\x20|\\x09)*(\\x0d\\x0a))?(\\x20|\\x09)+)?(([\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x7f]|"+"\\x21|[\\x23-\\x5b]|[\\x5d-\\x7e]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(\\\\([\\x01-\\x09\\x0b\\x0c\\x0d-\\x7f]|"+"[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]))))*(((\\x20|\\x09)*(\\x0d\\x0a))?(\\x20|\\x09)+)?(\\x22)))@((([a-z]|\\d|"+"[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])"+"([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])*([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])))\\.)"+"+(([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])([a-z]|\\d|-|\\.|_|~|"+"[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])*([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])))$","i");return r.test(n)});function n(e,r){var n=t.tryGetText("Validation."+r);if(n)$.validator.messages[e]=n;else if(!$.validator.messages[e])$.validator.messages[e]=r+"?"}n("required","Required");n("email","Email");n("minlength","MinLength");n("maxlength","MaxLength");n("digits","Digits");n("range","Range");n("xss","Xss");n("dateQ","DateInvalid");n("decimalQ","Decimal");n("integerQ","Integer");n("url","Url")}function a(e,r){if(t.isBS3())e.attr("data-original-title",r||"").tooltip("fixTitle");else e.attr("title",r||"").tooltip("_fixTitle");return e}var i={ignore:":hidden, .no-validate",showErrors:function(t,e){$.each(this.validElements(),function(t,e){var r=$(e);a(r.removeClass("error").addClass("valid"),"").tooltip("hide")});$.each(e,function(t,e){var r=$(e.element);a(r.addClass("error"),e.message);if(t==0)r.tooltip("show")})},normalizer:function(t){return $.trim(t)}};function o(e,r){return e.validate(t.extend(t.extend({},i),r))}t.validateTooltip=o;function u(e,r,n){if(!e.length)return e;if(n==null)throw new t.Exception("rule is null!");e.addClass("customValidate").bind("customValidate."+r,n);return e}t.addValidationRule=u;function l(t,e){t.unbind("customValidate."+e);return t}t.removeValidationRule=l})(Q||(Q={}));var Q;(function(t){var e;(function(e){function r(t){if(t==null)return false;if(t=="*")return true;if(t==""||t=="?")return e.isLoggedIn;var r=e.userDefinition;if(r&&r.IsAdmin)return true;if(r&&r.Permissions){var n=r.Permissions;if(n[t])return true;var a=t.split("|");for(var i=0,o=a;i<o.length;i++){var u=o[i];if(!u)continue;var l=u.split("&");if(!l.length)continue;var s=false;for(var f=0,c=l;f<c.length;f++){var d=c[f];if(!n[d]){s=true;break}}if(!s)return true}}return false}e.hasPermission=r;function n(e){if(!r(e)){t.notifyError(t.text("Authorization.AccessDenied"));throw new Error(t.text("Authorization.AccessDenied"))}}e.validatePermission=n})(e=t.Authorization||(t.Authorization={}));Object.defineProperty(t.Authorization,"userDefinition",{get:function(){return t.getRemoteData("UserData")}});Object.defineProperty(t.Authorization,"isLoggedIn",{get:function(){var t=e.userDefinition;return t&&!!t.Username}});Object.defineProperty(t.Authorization,"username",{get:function(){var t=e.userDefinition;if(t)return t.Username;return null}})})(Q||(Q={}));var Q;(function(t){var e;(function(t){var e;var r=0;var n=0;var a={};function i(){if(e==null&&n>0){e=window.setTimeout(u,100)}}function o(){if(e!=null){window.clearTimeout(e);e=null}}function u(){for(var t in a){var e=a[t];try{var r=e.element();if(!r)continue;var n=r.offsetWidth;var u=r.offsetHeight;try{if(e.width&&e.storedWidth!==n||e.height&&e.storedHeight!==u||!e.width&&!e.height&&(!n!==!e.storedWidth||!u!==!e.storedHeight)){if(n>0&&u>0){try{e.handler()}finally{n=r.offsetWidth;u=r.offsetHeight}}}}finally{e.storedWidth=n;e.storedHeight=u}}catch(l){console.log(l)}}o();i()}function l(t){var e=a[t];if(!e)return;var r=e.element();if(!r)return;e.storedWidth=r.offsetWidth;e.storedHeight=r.offsetHeight}t.store=l;function s(t){var e=a[t];if(!e)return;l(t);if(e.storedWidth>=0&&e.storedHeight>=0){e.handler()}l(t)}t.trigger=s;function f(t,e,o,u){if(e==null)throw"Layout handler can't be null!";a[++r]={element:t,handler:e,width:o!==false,height:u!==false};n++;l(r);i();return r}t.onSizeChange=f;function c(t,e){return f(t,e,true,false)}t.onWidthChange=c;function d(t,e){return f(t,e,false,true)}t.onHeightChange=d;function p(t,e){return f(t,e,false,false)}t.onShown=p;function h(t){var e=a[t];if(!e)return 0;delete a[t];n--;if(n<=0)o();return 0}t.off=h})(e=t.LayoutTimer||(t.LayoutTimer={}))})(Q||(Q={}));var Serenity;(function(t){function e(t){return[t]}t.Criteria=e;(function(t){var e=t;function r(t){return t==null||t.length===0||t.length===1&&typeof t[0]=="string"&&t[0].length===0}t.isEmpty=r;function n(t,r,n){if(e.isEmpty(t))return n;if(e.isEmpty(n))return t;return[t,r,n]}t.join=n;function a(t){return e.isEmpty(t)?t:["()",t]}t.paren=a;function i(t,e){var r=[];for(var a=2;a<arguments.length;a++){r[a-2]=arguments[a]}var i=n(t,"and",e);if(r){for(var o=0,u=r;o<u.length;o++){var l=u[o];i=n(i,"and",l)}}return i}t.and=i;function o(t,e){var r=[];for(var a=2;a<arguments.length;a++){r[a-2]=arguments[a]}var i=n(t,"or",e);if(r){for(var o=0,u=r;o<u.length;o++){var l=u[o];i=n(i,"or",l)}}return i}t.or=o})(e=t.Criteria||(t.Criteria={}))})(Serenity||(Serenity={}));var Serenity;(function(t){var e;(function(t){t[t["Disabled"]=-1]="Disabled";t[t["None"]=0]="None";t[t["Sum"]=1]="Sum";t[t["Avg"]=2]="Avg";t[t["Min"]=3]="Min";t[t["Max"]=4]="Max"})(e=t.SummaryType||(t.SummaryType={}))})(Serenity||(Serenity={}));typeof module!=="undefined"&&(module.exports={Q:Q,Serenity:Serenity,__extends:__extends});